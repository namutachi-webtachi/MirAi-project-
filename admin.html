<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ”¥ Admin Panel Ultimate Pro Max 2025</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 30px 20px;
      transition: all 0.3s;
    }
    
    body.dark-mode {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 24px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      transition: all 0.3s;
    }
    
    body.dark-mode .container {
      background: #1e1e1e;
      color: #e0e0e0;
    }
    
    .header-flex {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      flex-wrap: wrap;
      gap: 20px;
    }
    
    h1 {
      color: #333;
      font-size: 32px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    body.dark-mode h1 {
      color: #fff;
    }
    
    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 40px;
      font-size: 14px;
    }
    
    body.dark-mode .subtitle {
      color: #999;
    }
    
    .top-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      border-bottom: 2px solid #e0e0e0;
      overflow-x: auto;
    }
    
    body.dark-mode .tabs {
      border-bottom-color: #444;
    }
    
    .tab {
      padding: 12px 24px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      color: #666;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: .3s;
      white-space: nowrap;
    }
    
    .tab.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }
    
    body.dark-mode .tab {
      color: #999;
    }
    
    body.dark-mode .tab.active {
      color: #8b9bff;
      border-bottom-color: #8b9bff;
    }
    
    .tab:hover {
      color: #667eea;
    }
    
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    
    .section {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 16px;
      margin-bottom: 25px;
      transition: all 0.3s;
    }
    
    body.dark-mode .section {
      background: #2d2d2d;
      border: 1px solid #444;
    }
    
    .section h2 {
      color: #667eea;
      margin-bottom: 20px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    body.dark-mode .section h2 {
      color: #8b9bff;
    }
    
    .form-group {
      margin-bottom: 18px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 500;
      font-size: 14px;
    }
    
    body.dark-mode label {
      color: #ccc;
    }
    
    input, textarea, select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      font-size: 15px;
      transition: .3s;
      font-family: inherit;
      background: white;
      color: #333;
    }
    
    body.dark-mode input,
    body.dark-mode textarea,
    body.dark-mode select {
      background: #333;
      color: #fff;
      border-color: #555;
    }
    
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    textarea {
      min-height: 300px;
      resize: vertical;
      font-family: 'Courier New', monospace;
      line-height: 1.6;
    }
    
    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 14px 32px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: .3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }
    .btn-secondary {
      background: #6c757d;
    }
    .btn-success {
      background: #28a745;
    }
    .btn-warning {
      background: #ffc107;
      color: #333;
    }
    .btn-danger {
      background: #dc3545;
    }
    .btn-small {
      padding: 8px 16px;
      font-size: 14px;
    }
    .btn-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .chapter-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .chapter-item {
      background: white;
      padding: 16px 20px;
      border-radius: 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 2px solid #e0e0e0;
      transition: .2s;
    }
    
    body.dark-mode .chapter-item {
      background: #2d2d2d;
      border-color: #444;
    }
    
    .chapter-item:hover {
      border-color: #667eea;
      transform: translateX(5px);
    }
    .chapter-info {
      flex: 1;
    }
    .chapter-title {
      font-weight: 600;
      color: #333;
      margin-bottom: 4px;
    }
    
    body.dark-mode .chapter-title {
      color: #fff;
    }
    
    .chapter-meta {
      font-size: 13px;
      color: #999;
    }
    .chapter-actions {
      display: flex;
      gap: 8px;
    }
    
    .output-box {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 12px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 13px;
      line-height: 1.6;
      overflow-x: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
      max-height: 400px;
      overflow-y: auto;
      margin-top: 15px;
    }
    
    body.dark-mode .output-box {
      background: #000;
      color: #0f0;
    }
    
    .success-msg {
      background: #d4edda;
      color: #155724;
      padding: 16px 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      display: none;
      align-items: center;
      gap: 10px;
      border: 2px solid #c3e6cb;
      animation: slideIn 0.3s ease;
    }
    .success-msg.show { display: flex; }
    
    @keyframes slideIn {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .alert {
      padding: 16px 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      border: 2px solid;
    }
    .alert-info {
      background: #d1ecf1;
      color: #0c5460;
      border-color: #bee5eb;
    }
    .alert-warning {
      background: #fff3cd;
      color: #856404;
      border-color: #ffeaa7;
    }
    
    body.dark-mode .alert-info {
      background: #1a3a3a;
      color: #6dd5ed;
      border-color: #2d5a5a;
    }
    
    body.dark-mode .alert-warning {
      background: #3a3a1a;
      color: #ffd93d;
      border-color: #5a5a2d;
    }
    
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-bottom: 25px;
    }
    .stat-card {
      background: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
      border: 2px solid #e0e0e0;
      transition: all 0.3s;
    }
    
    body.dark-mode .stat-card {
      background: #2d2d2d;
      border-color: #444;
    }
    
    .stat-number {
      font-size: 32px;
      font-weight: 700;
      color: #667eea;
      margin-bottom: 5px;
    }
    
    body.dark-mode .stat-number {
      color: #8b9bff;
    }
    
    .stat-label {
      font-size: 13px;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    body.dark-mode .stat-label {
      color: #999;
    }
    
    .preview {
      background: white;
      padding: 30px;
      border-radius: 12px;
      border: 2px solid #e0e0e0;
      margin-top: 20px;
      min-height: 200px;
      line-height: 1.8;
      transition: all 0.3s;
    }
    
    body.dark-mode .preview {
      background: #2d2d2d;
      border-color: #444;
      color: #e0e0e0;
    }
    
    .preview h3 {
      margin-bottom: 20px;
      color: #333;
    }
    
    body.dark-mode .preview h3 {
      color: #fff;
    }
    
    .preview p {
      margin: 15px 0;
      text-align: justify;
    }
    
    @media (max-width: 768px) {
      .container { padding: 25px 20px; }
      h1 { font-size: 26px; }
      .tabs { overflow-x: auto; }
      .chapter-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
      }
      .chapter-actions {
        width: 100%;
        justify-content: flex-end;
      }
      .header-flex {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-flex">
      <div>
        <h1>ğŸ”¥ Admin Panel Ultimate Pro Max 2025</h1>
        <p class="subtitle">by Grok x namutachi-webtachi - VÃ´ Ä‘á»‹ch thiÃªn háº¡!</p>
      </div>
      <div class="top-actions">
        <button class="btn btn-small btn-secondary" onclick="toggleDarkMode()">ğŸŒ™ Dark Mode</button>
        <button class="btn btn-small btn-success" onclick="postToTelegram()">ğŸ“¢ ÄÄƒng Telegram</button>
      </div>
    </div>
    
    <div class="success-msg" id="successMsg">
      <span style="font-size:20px">âœ“</span>
      <span id="successText">ThÃ nh cÃ´ng!</span>
    </div>
    
    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" onclick="switchTab(0)">ğŸ“ TXT â†’ HTML</button>
      <button class="tab" onclick="switchTab(1)">â• Quáº£n lÃ½ chÆ°Æ¡ng</button>
      <button class="tab" onclick="switchTab(2)">ğŸ’¾ Export/Import</button>
    </div>
    
    <!-- Tab 1: TXT to HTML Converter -->
    <div class="tab-content active" id="tab0">
      <div class="section">
        <h2>ğŸ“ Chuyá»ƒn Ä‘á»•i TXT sang HTML</h2>
        <div class="alert alert-info">
          ğŸ’¡ <strong>HÆ°á»›ng dáº«n:</strong> Paste ná»™i dung chÆ°Æ¡ng vÃ o Ã´ bÃªn dÆ°á»›i. Má»—i Ä‘oáº¡n vÄƒn cÃ¡ch nhau bá»Ÿi 1 dÃ²ng trá»‘ng sáº½ tá»± Ä‘á»™ng thÃ nh tháº» &lt;p&gt;
        </div>
        
        <div class="form-group">
          <label>TiÃªu Ä‘á» chÆ°Æ¡ng (khÃ´ng báº¯t buá»™c)</label>
          <input type="text" id="convertTitle" placeholder="VÃ­ dá»¥: ChÆ°Æ¡ng 5: Báº¯t Ä‘áº§u">
        </div>
        
        <div class="form-group">
          <label>Ná»™i dung vÄƒn báº£n (TXT)</label>
          <textarea id="txtInput" placeholder="Paste ná»™i dung chÆ°Æ¡ng á»Ÿ Ä‘Ã¢y...

Äoáº¡n 1: Má»—i Ä‘oáº¡n cÃ¡ch nhau bá»Ÿi dÃ²ng trá»‘ng.

Äoáº¡n 2: Sáº½ tá»± Ä‘á»™ng thÃ nh HTML.

Äoáº¡n 3: Ráº¥t Ä‘Æ¡n giáº£n!"></textarea>
        </div>
        
        <div class="btn-group">
          <button class="btn" onclick="convertToHTML()">
            <span>ğŸ”„</span>
            Chuyá»ƒn Ä‘á»•i sang HTML
          </button>
          <button class="btn btn-success" onclick="downloadHTML()">
            <span>ğŸ’¾</span>
            Táº£i file HTML
          </button>
          <button class="btn btn-secondary" onclick="copyHTML()">
            <span>ğŸ“‹</span>
            Copy HTML
          </button>
        </div>
        
        <div class="preview" id="preview">
          <h3>ğŸ‘ï¸ Preview</h3>
          <p style="color:#999;">Ná»™i dung preview sáº½ hiá»‡n á»Ÿ Ä‘Ã¢y...</p>
        </div>
        
        <div class="form-group" style="margin-top:20px;">
          <label>HTML Code (Ä‘á»ƒ copy vÃ o file)</label>
          <div class="output-box" id="htmlOutput"></div>
        </div>
      </div>
    </div>
    
    <!-- Tab 2: Chapter Management -->
    <div class="tab-content" id="tab1">
      <div class="stats">
        <div class="stat-card">
          <div class="stat-number" id="totalChapters">0</div>
          <div class="stat-label">Tá»•ng chÆ°Æ¡ng</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="latestDate">---</div>
          <div class="stat-label">ChÆ°Æ¡ng má»›i nháº¥t</div>
        </div>
      </div>
      
      <div class="section">
        <h2>âš¡ ThÃªm chÆ°Æ¡ng SIÃŠU NHANH</h2>
        <div class="alert alert-warning">
          ğŸš€ <strong>TÃ­nh nÄƒng má»›i:</strong> Click "Tá»± Ä‘á»™ng táº¡o" Ä‘á»ƒ tool tá»± gen tiÃªu Ä‘á» + tÃªn file chuáº©n slug!
        </div>
        <form id="addChapterForm">
          <div class="form-group">
            <label>TiÃªu Ä‘á» chÆ°Æ¡ng</label>
            <input type="text" id="chapterTitle" placeholder="VÃ­ dá»¥: ChÆ°Æ¡ng 69: Harem tÄƒng thÃªm" required>
          </div>
          <div class="form-group">
            <label>File path</label>
            <input type="text" id="chapterFile" placeholder="chapters/chuong-69-harem-tang-them.html" required>
          </div>
          <div class="form-group">
            <label>NgÃ y Ä‘Äƒng (YYYY-MM-DD)</label>
            <input type="date" id="chapterDate" required>
          </div>
          <div class="btn-group">
            <button type="button" class="btn btn-warning" onclick="autoGenerate()">
              <span>âš¡</span>
              Tá»± Ä‘á»™ng táº¡o
            </button>
            <button type="submit" class="btn">
              <span>â•</span>
              ThÃªm chÆ°Æ¡ng
            </button>
          </div>
        </form>
      </div>
      
      <div class="section">
        <h2>ğŸ“š Danh sÃ¡ch chÆ°Æ¡ng</h2>
        <div class="chapter-list" id="chapterList"></div>
      </div>
    </div>
    
    <!-- Tab 3: Export/Import & GitHub -->
    <div class="tab-content" id="tab2">
      <div class="section">
        <h2>ğŸš€ GitHub Setup (Chá»‰ lÃ m 1 láº§n)</h2>
        <div class="alert alert-warning">
          âš™ï¸ <strong>Setup láº§n Ä‘áº§u:</strong> Nháº­p thÃ´ng tin GitHub Ä‘á»ƒ tool tá»± Ä‘á»™ng upload cho báº¡n!
        </div>
        <div class="form-group">
          <label>GitHub Personal Access Token</label>
          <input type="password" id="githubToken" placeholder="ghp_xxxxxxxxxxxx" value="">
          <small style="color:#666;display:block;margin-top:5px;">
            ğŸ“– <a href="https://github.com/settings/tokens/new?scopes=repo&description=MirAi-Admin-Tool" target="_blank" style="color:#667eea;">Táº¡o token má»›i táº¡i Ä‘Ã¢y</a> (chá»n scope: repo)
          </small>
        </div>
        <div class="form-group">
          <label>GitHub Username</label>
          <input type="text" id="githubUser" placeholder="namutachi-webtachi" value="">
        </div>
        <div class="form-group">
          <label>Repository Name</label>
          <input type="text" id="githubRepo" placeholder="MirAi-project-" value="">
        </div>
        <div class="btn-group">
          <button class="btn btn-success" onclick="saveGitHubConfig()">
            <span>ğŸ’¾</span>
            LÆ°u cáº¥u hÃ¬nh
          </button>
          <button class="btn btn-secondary" onclick="testGitHubConnection()">
            <span>ğŸ”Œ</span>
            Test káº¿t ná»‘i
          </button>
        </div>
      </div>
      
      <div class="section">
        <h2>ğŸš€ Auto Upload - Tá»° Äá»˜NG HOÃ€N TOÃ€N!</h2>
        <div class="alert alert-info">
          ğŸ’¡ <strong>SiÃªu dá»…:</strong> Sau khi setup GitHub, chá»‰ cáº§n 1 click Ä‘á»ƒ upload táº¥t cáº£!
        </div>
        <div class="btn-group">
          <button class="btn" onclick="autoUploadChapters()" style="font-size:18px;padding:16px 40px;">
            <span>ğŸš€</span>
            Upload chapters.json lÃªn GitHub
          </button>
          <button class="btn btn-warning" onclick="autoUploadChapterFile()">
            <span>ğŸ“„</span>
            Upload file HTML má»›i
          </button>
        </div>
        <div id="uploadProgress" style="margin-top:20px;display:none;">
          <div style="background:#e0e0e0;height:30px;border-radius:15px;overflow:hidden;">
            <div id="progressBar" style="background:linear-gradient(90deg,#667eea,#764ba2);height:100%;width:0%;transition:width 0.3s;display:flex;align-items:center;justify-content:center;color:white;font-weight:600;">0%</div>
          </div>
          <p id="uploadStatus" style="text-align:center;margin-top:10px;color:#666;">Äang chuáº©n bá»‹...</p>
        </div>
      </div>
      
      <div class="section">
        <h2>ğŸ’¾ Export Thá»§ cÃ´ng (Backup)</h2>
        <div class="alert alert-info">
          ğŸ’¡ Export ra file náº¿u muá»‘n backup hoáº·c upload thá»§ cÃ´ng
        </div>
        <div class="btn-group">
          <button class="btn btn-success" onclick="exportJSON()">
            <span>ğŸ’¾</span>
            Export chapters.json
          </button>
          <button class="btn btn-secondary" onclick="exportJS()">
            <span>ğŸ“„</span>
            Copy JS code
          </button>
        </div>
        <div class="output-box" id="exportOutput" style="margin-top:20px;">Export data sáº½ hiá»‡n á»Ÿ Ä‘Ã¢y...</div>
      </div>
      
      <div class="section">
        <h2>ğŸ“¥ Import Chapters</h2>
        <div class="alert alert-warning">
          âš ï¸ <strong>Cáº£nh bÃ¡o:</strong> Import sáº½ GHI ÄÃˆ toÃ n bá»™ danh sÃ¡ch chÆ°Æ¡ng hiá»‡n táº¡i!
        </div>
        <div class="form-group">
          <label>Paste JSON hoáº·c JS code</label>
          <textarea id="importInput" placeholder='[
  {"title":"ChÆ°Æ¡ng 1", "file":"chapters/chuong-1.html", "date":"2025-12-06"},
  {"title":"ChÆ°Æ¡ng 2", "file":"chapters/chuong-2.html", "date":"2025-12-10"}
]'></textarea>
        </div>
        <button class="btn btn-warning" onclick="importData()">
          <span>ğŸ“¥</span>
          Import Data
        </button>
      </div>
    </div>
  </div>

  <script>
    // === ULTIMATE PRO MAX 2025 - by Grok x namutachi-webtachi ===
    let chapters = JSON.parse(localStorage.getItem('mirai_chapters') || '[]');
    let isDarkMode = localStorage.getItem('mirai_dark') === 'true';
    
    // Default chapters náº¿u chÆ°a cÃ³
    if(chapters.length === 0){
      chapters = [
        {title:"ChÆ°Æ¡ng 0: Má»Ÿ Ä‘áº§u", file:"chapters/chuong-0.html", date:"2025-12-05"},
        {title:"ChÆ°Æ¡ng 1: Ta xuyÃªn khÃ´ng rá»“i sao ná»•i", file:"chapters/chuong-1.html", date:"2025-12-06"},
      ];
      saveChapters();
    }

    // Dark mode
    if(isDarkMode){
      document.body.classList.add('dark-mode');
    }

    function toggleDarkMode(){
      isDarkMode = !isDarkMode;
      document.body.classList.toggle('dark-mode', isDarkMode);
      localStorage.setItem('mirai_dark', isDarkMode);
      showSuccess(isDarkMode ? 'ğŸŒ™ ÄÃ£ báº­t Dark Mode!' : 'â˜€ï¸ ÄÃ£ táº¯t Dark Mode!');
    }

    function saveChapters(){
      localStorage.setItem('mirai_chapters', JSON.stringify(chapters));
      // Sync vá»›i key cÅ© Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch
      localStorage.setItem('chapters', JSON.stringify(chapters));
      render();
    }

    function render(){
      updateStats();
      renderChapterList();
    }

    function updateStats(){
      document.getElementById('totalChapters').textContent = chapters.length;
      if(chapters.length > 0){
        document.getElementById('latestDate').textContent = chapters[chapters.length-1].date;
      }
    }

    function renderChapterList(){
      const list = document.getElementById('chapterList');
      list.innerHTML = chapters.length === 0 
        ? '<p style="text-align:center;color:#999;padding:40px;">ChÆ°a cÃ³ chÆ°Æ¡ng nÃ o, thÃªm ngay Ä‘i boss! ğŸ”¥</p>'
        : chapters.map((ch, i) => `
          <div class="chapter-item">
            <div class="chapter-info">
              <div class="chapter-title">${ch.title}</div>
              <div class="chapter-meta">ğŸ“„ ${ch.file} â€¢ ğŸ“… ${ch.date}</div>
            </div>
            <div class="chapter-actions">
              <button class="btn btn-small btn-danger" onclick="deleteChapter(${i})">
                ğŸ—‘ï¸ XÃ³a
              </button>
            </div>
          </div>
        `).join('');
    }

    // AUTO GENERATE TITLE + FILENAME - TÃNH NÄ‚NG Äá»ˆNH CAO!
    function autoGenerate(){
      const num = prompt("Nháº­p sá»‘ chÆ°Æ¡ng má»›i (vÃ­ dá»¥: 69):");
      if(!num) return;
      
      const baseTitle = prompt("Nháº­p tiÃªu Ä‘á» chÆ°Æ¡ng (khÃ´ng cáº§n ghi sá»‘):", "Harem láº¡i tÄƒng thÃªm 3 em ná»¯a");
      if(!baseTitle) return;

      const fullTitle = `ChÆ°Æ¡ng ${num}: ${baseTitle}`;
      
      // Táº¡o slug chuáº©n SEO (chuyá»ƒn tiáº¿ng Viá»‡t khÃ´ng dáº¥u)
      const slug = baseTitle.toLowerCase()
        .normalize('NFD').replace(/[\u0300-\u036f]/g, '') // Bá» dáº¥u
        .replace(/Ä‘/g, 'd').replace(/Ä/g, 'D') // Äá»•i Ä‘ thÃ nh d
        .replace(/[^a-z0-9]+/g, '-') // Thay kÃ½ tá»± Ä‘áº·c biá»‡t báº±ng -
        .replace(/^-+|-+$/g, ''); // XÃ³a - á»Ÿ Ä‘áº§u cuá»‘i
      
      const filename = `chapters/chuong-${num}-${slug}.html`;

      document.getElementById('chapterTitle').value = fullTitle;
      document.getElementById('chapterFile').value = filename;
      document.getElementById('chapterDate').valueAsDate = new Date();

      showSuccess(`âœ¨ ÄÃ£ táº¡o sáºµn: ${fullTitle}`);
    }

    function switchTab(index){
      document.querySelectorAll('.tab').forEach((t,i) => {
        t.classList.toggle('active', i === index);
      });
      document.querySelectorAll('.tab-content').forEach((c,i) => {
        c.classList.toggle('active', i === index);
      });
    }
    
    function showSuccess(msg){
      const el = document.getElementById('successMsg');
      document.getElementById('successText').textContent = msg;
      el.classList.add('show');
      setTimeout(() => el.classList.remove('show'), 3000);
    }
    
    // Chapter Management
    document.getElementById('addChapterForm').onsubmit = (e) => {
      e.preventDefault();
      const title = document.getElementById('chapterTitle').value;
      const file = document.getElementById('chapterFile').value;
      const date = document.getElementById('chapterDate').value;
      
      chapters.push({title, file, date});
      saveChapters();
      e.target.reset();
      showSuccess(`âœ“ ÄÃ£ thÃªm "${title}" thÃ nh cÃ´ng! ğŸ‰`);
      document.getElementById('chapterDate').valueAsDate = new Date();
    };
    
    function deleteChapter(index){
      if(confirm(`XÃ³a "${chapters[index].title}"?`)){
        chapters.splice(index, 1);
        saveChapters();
        showSuccess('âœ“ ÄÃ£ xÃ³a chÆ°Æ¡ng!');
      }
    }
    
    // TXT to HTML Converter
    function convertToHTML(){
      const title = document.getElementById('convertTitle').value;
      const txt = document.getElementById('txtInput').value;
      
      if(!txt.trim()){
        alert('Vui lÃ²ng nháº­p ná»™i dung!');
        return;
      }
      
      const paragraphs = txt.split(/\n\n+/).filter(p => p.trim());
      
      let html = '<!DOCTYPE html>\n<html lang="vi">\n<head>\n  <meta charset="utf-8">\n';
      if(title) html += `  <title>${title}</title>\n`;
      html += '</head>\n<body>\n  <div id="content">\n';
      
      if(title) html += `    <h2>${title}</h2>\n`;
      
      paragraphs.forEach(p => {
        const cleaned = p.trim().replace(/\n/g, ' ');
        html += `    <p>${cleaned}</p>\n`;
      });
      
      html += '  </div>\n</body>\n</html>';
      
      document.getElementById('htmlOutput').textContent = html;
      
      let previewHTML = '';
      if(title) previewHTML += `<h3>${title}</h3>`;
      paragraphs.forEach(p => {
        const cleaned = p.trim().replace(/\n/g, ' ');
        previewHTML += `<p>${cleaned}</p>`;
      });
      document.getElementById('preview').innerHTML = previewHTML;
      
      showSuccess('âœ“ ÄÃ£ chuyá»ƒn Ä‘á»•i thÃ nh cÃ´ng! ğŸ‰');
    }
    
    function downloadHTML(){
      const html = document.getElementById('htmlOutput').textContent;
      if(!html || html === ''){
        alert('ChÆ°a cÃ³ HTML Ä‘á»ƒ táº£i! HÃ£y chuyá»ƒn Ä‘á»•i trÆ°á»›c.');
        return;
      }
      
      const title = document.getElementById('convertTitle').value || 'chuong';
      const filename = title.toLowerCase().replace(/[^a-z0-9]+/g, '-') + '.html';
      
      const blob = new Blob([html], {type: 'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      a.click();
      URL.revokeObjectURL(url);
      
      showSuccess('âœ“ ÄÃ£ táº£i file HTML! ğŸ’¾');
    }
    
    function copyHTML(){
      const html = document.getElementById('htmlOutput').textContent;
      if(!html || html === ''){
        alert('ChÆ°a cÃ³ HTML Ä‘á»ƒ copy!');
        return;
      }
      
      navigator.clipboard.writeText(html).then(() => {
        showSuccess('âœ“ ÄÃ£ copy HTML! ğŸ“‹');
      });
    }
    
    // Export/Import
    function exportJSON(){
      const json = JSON.stringify(chapters, null, 2);
      document.getElementById('exportOutput').textContent = json;
      
      const blob = new Blob([json], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'chapters.json';
      a.click();
      URL.revokeObjectURL(url);
