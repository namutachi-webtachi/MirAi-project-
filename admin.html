<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 Not Found</title> <!-- Ng·ª•y trang -->
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* CSS ri√™ng cho Admin ƒë·ªÉ ƒë·∫£m b·∫£o hi·ªÉn th·ªã ƒë√∫ng */
        body { background-color: #000; margin: 0; overflow: hidden; font-family: monospace; }
        
        /* M√†n h√¨nh kh√≥a ƒëen */
        #black-screen {
            height: 100vh; width: 100vw; 
            display: flex; justify-content: center; align-items: center; 
            color: #333; font-size: 1.2rem;
        }

        /* Panel Admin */
        #admin-panel { display: none; padding-bottom: 50px; background: #f4f4f4; min-height: 100vh; overflow-y: auto; }

        /* Tabs Navigation */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab-btn { flex: 1; padding: 12px; cursor: pointer; background: #ddd; border: none; border-radius: 8px; font-weight: bold; transition: 0.3s; min-width: 120px; }
        .tab-btn:hover { background: #ccc; }
        .tab-btn.active { background: var(--primary); color: white; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }

        /* Danh s√°ch item */
        .chapter-row { display: flex; justify-content: space-between; align-items: center; background: white; padding: 12px; margin-bottom: 8px; border-radius: 8px; border: 1px solid #eee; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .chapter-row:hover { border-color: var(--primary); transform: translateX(2px); transition: 0.2s; }
        
        /* Buttons Action */
        .action-group { display: flex; gap: 5px; }
        .btn-action { padding: 6px 12px; border-radius: 6px; cursor: pointer; border: none; color: white; font-weight: bold; font-size: 0.8rem; }
        .edit-btn { background: #f39c12; } .edit-btn:hover { background: #d35400; }
        .del-btn { background: #e74c3c; } .del-btn:hover { background: #c0392b; }

        /* File Drop Zone */
        .file-drop { border: 2px dashed #aaa; padding: 20px; text-align: center; border-radius: 10px; cursor: pointer; margin-bottom: 15px; background: white; transition: 0.3s; font-weight: bold; color: #555; }
        .file-drop:hover { border-color: var(--primary); background: rgba(255, 107, 129, 0.1); color: var(--primary); }
        
        /* Inputs & Textarea */
        input[type="text"], input[type="password"], textarea {
            width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 10px; font-family: inherit; font-size: 1rem; box-sizing: border-box;
        }
        textarea { resize: vertical; min-height: 300px; }
    </style>
</head>
<body>

    <!-- 1. M√ÄN H√åNH KH√ìA -->
    <div id="black-screen">
        <p>SYSTEM HALTED. PRESS F12 TO LOGIN.</p>
    </div>

    <!-- 2. GIAO DI·ªÜN ADMIN CH√çNH -->
    <div id="admin-panel" class="container">
        <header class="glass-box" style="text-align: center; margin-top: 30px;">
            <h2 style="color: var(--primary);">‚ò†Ô∏è GOD MODE ADMIN</h2>
            <p style="color: #666; margin-bottom: 15px;">Trung t√¢m ƒëi·ªÅu khi·ªÉn t·ªëi th∆∞·ª£ng</p>
            <a href="index.html" class="btn btn-outline">‚¨Ö Quay v·ªÅ Web</a>
        </header>

        <!-- TOKEN -->
        <div class="glass-box">
            <h3>üîë GitHub Token</h3>
            <input type="password" id="token" placeholder="D√°n Token v√†o ƒë√¢y (ghp_...)" onchange="saveToken()">
            <small style="color: #666;">Token ƒë∆∞·ª£c l∆∞u trong tr√¨nh duy·ªát c·ªßa b·∫°n.</small>
        </div>

        <!-- THANH MENU (TABS) -->
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('new')">üìù ƒêƒÉng Truy·ªán</button>
            <button class="tab-btn" onclick="switchTab('list')">üìã Qu·∫£n L√Ω Truy·ªán</button>
            <button class="tab-btn" onclick="switchTab('music')">üéµ Kho Nh·∫°c (DJ)</button>
        </div>

        <!-- TAB 1: SO·∫†N TH·∫¢O & ƒêƒÇNG TRUY·ªÜN -->
        <div id="tab-editor" class="glass-box">
            <h3 id="editor-title">üìù So·∫°n Th·∫£o Ch∆∞∆°ng M·ªõi</h3>
            
            <!-- C√°c bi·∫øn ·∫©n ƒë·ªÉ l∆∞u tr·∫°ng th√°i s·ª≠a -->
            <input type="hidden" id="edit-index" value="">
            <input type="hidden" id="edit-file-sha" value="">

            <label>Ti√™u ƒë·ªÅ:</label>
            <input type="text" id="chapTitle" placeholder="V√≠ d·ª•: Ch∆∞∆°ng 1: Kh·ªüi ƒë·∫ßu">
            
            <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                <div class="file-drop" style="flex: 1;" onclick="document.getElementById('txtInput').click()">
                    üìÇ Import File TXT
                    <input type="file" id="txtInput" accept=".txt" hidden onchange="handleTxt()">
                </div>
                <div class="file-drop" style="flex: 1;" onclick="document.getElementById('imgInput').click()">
                    üñº Upload ·∫¢nh
                    <input type="file" id="imgInput" accept="image/*" hidden onchange="handleImg()">
                </div>
            </div>
            <p id="imgStatus" style="text-align: center; color: var(--primary); font-size: 0.9rem; font-weight: bold;"></p>

            <button class="btn" onclick="autoFormat()" style="width: 100%; background: #2ecc71; margin-bottom: 15px;">‚ú® T·ª± ƒê·ªông ƒê·ªãnh D·∫°ng (AI)</button>
            
            <textarea id="content" placeholder="N·ªôi dung truy·ªán (Markdown)..."></textarea>
            
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button id="publishBtn" class="btn" onclick="publish()" style="flex: 1;">üöÄ ƒêƒÇNG B√ÄI NGAY</button>
                <button id="cancelBtn" class="btn" onclick="resetForm()" style="background: #95a5a6; display: none;">H·ªßy S·ª≠a</button>
            </div>
            <p id="status" style="text-align: center; font-weight: bold; margin-top: 15px; font-size: 1.1rem;"></p>
        </div>

        <!-- TAB 2: DANH S√ÅCH & QU·∫¢N L√ù TRUY·ªÜN -->
        <div id="tab-list" class="glass-box" style="display: none;">
            <h3>üìã Danh s√°ch ch∆∞∆°ng ƒë√£ ƒëƒÉng</h3>
            <button class="btn btn-outline" onclick="loadList()" style="width: 100%; margin-bottom: 15px;">üîÑ L√†m m·ªõi danh s√°ch</button>
            <div id="list-container">ƒêang t·∫£i d·ªØ li·ªáu...</div>
        </div>

        <!-- TAB 3: QU·∫¢N L√ù NH·∫†C (MUSIC STATION) -->
        <div id="tab-music" class="glass-box" style="display: none;">
            <h3>üéµ Upload Nh·∫°c M·ªõi</h3>
            
            <label>T√™n b√†i h√°t:</label>
            <input type="text" id="songTitle" placeholder="V√≠ d·ª•: Lofi Chill Morning">
            
            <div class="file-drop" onclick="document.getElementById('mp3Input').click()">
                üíø Ch·ªçn file MP3 (t·ª´ m√°y t√≠nh)
                <input type="file" id="mp3Input" accept=".mp3" hidden>
            </div>
            
            <button class="btn" onclick="uploadSong()" style="width: 100%;">‚¨ÜÔ∏è Upload v√†o Playlist</button>
            <p id="musicStatus" style="text-align: center; font-weight: bold; margin-top: 15px; color: var(--primary);"></p>
            
            <hr style="margin: 30px 0; border: 0; border-top: 1px dashed #ccc;">
            
            <h3>üéº Danh s√°ch ph√°t hi·ªán t·∫°i</h3>
            <button class="btn btn-outline" onclick="loadMusicList()" style="width: 100%; margin-bottom: 15px;">üîÑ L√†m m·ªõi Playlist</button>
            <div id="music-list-container">ƒêang t·∫£i d·ªØ li·ªáu...</div>
        </div>
    </div>

    <!-- SCRIPT X·ª¨ L√ù (JS) -->
    <script src="config.js"></script>
    <script>
        // ==========================================
        // üîê M·∫¨T KH·∫®U HACKER C·ª¶A BRO
        const SECRET_PASS = "2006"; 
        // ==========================================

        // --- 1. LOGIC ƒêƒÇNG NH·∫¨P (CONSOLE) ---
        console.log("%cüõë SYSTEM LOCKED", "color: red; font-size: 30px; font-weight: bold;");
        console.log("%cG√µ l·ªánh: login('MAT_KHAU') ƒë·ªÉ truy c·∫≠p.", "color: yellow; font-size: 16px;");

        window.login = function(pass) {
            if(pass === SECRET_PASS) {
                console.clear();
                console.log("%c‚úÖ ACCESS GRANTED", "color: lime; font-size: 20px;");
                document.getElementById('black-screen').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
                document.body.style.backgroundColor = "#f4f4f4";
                if(typeof CONFIG !== 'undefined') document.body.style.backgroundImage = `url('${CONFIG.bgImage}')`;
                document.body.style.overflow = "auto";
                if(localStorage.getItem('gh_token')) document.getElementById('token').value = localStorage.getItem('gh_token');
            } else {
                console.log("%c‚ùå WRONG PASSWORD", "color: red; font-size: 20px;");
            }
        }

        // --- 2. LOGIC CHUY·ªÇN TAB ---
        function switchTab(t) {
            // ·∫®n t·∫•t c·∫£ tab, b·ªè active n√∫t
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.glass-box[id^="tab-"]').forEach(d => d.style.display = 'none');
            
            // Hi·ªán tab ƒë∆∞·ª£c ch·ªçn
            let targetTab = (t === 'new') ? 'tab-editor' : (t === 'list' ? 'tab-list' : 'tab-music');
            document.getElementById(targetTab).style.display = 'block';
            document.querySelector(`button[onclick="switchTab('${t}')"]`).classList.add('active');
            
            // Load d·ªØ li·ªáu t∆∞∆°ng ·ª©ng
            if(t === 'list') loadList();
            if(t === 'music') loadMusicList();
        }

        function saveToken() { localStorage.setItem('gh_token', document.getElementById('token').value); }

        // ============================================================
        // PH·∫¶N A: QU·∫¢N L√ù TRUY·ªÜN (Upload, Edit, Delete)
        // ============================================================

        // A1. X·ª≠ l√Ω File TXT v√† ·∫¢nh
        function handleTxt() {
            const r = new FileReader();
            r.onload = e => {
                // Chu·∫©n h√≥a xu·ªëng d√≤ng
                document.getElementById('content').value = e.target.result.replace(/\r\n/g, "\n").replace(/\n/g, "\n\n");
            };
            r.readAsText(document.getElementById('txtInput').files[0]);
        }

        async function handleImg() {
            const f = document.getElementById('imgInput').files[0];
            if(!f) return;
            const t = document.getElementById('token').value;
            if(!t) return alert("Thi·∫øu Token!");

            document.getElementById('imgStatus').innerText = "‚è≥ ƒêang upload ·∫£nh...";
            const r = new FileReader();
            r.readAsDataURL(f);
            r.onload = async function() {
                try {
                    const b64 = r.result.split(',')[1];
                    const n = `images/${Date.now()}_${f.name}`;
                    // Upload l√™n GitHub
                    await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/${n}`, {
                        method: 'PUT', headers: {Authorization: `token ${t}`}, 
                        body: JSON.stringify({message: "upload img", content: b64})
                    });
                    
                    const url = `https://${CONFIG.adminUser}.github.io/${CONFIG.repoName}/${n}`;
                    const ta = document.getElementById('content');
                    // Ch√®n link ·∫£nh v√†o b√†i
                    ta.value = `![Minh h·ªça](${url})\n` + ta.value;
                    document.getElementById('imgStatus').innerText = "‚úÖ ·∫¢nh ƒë√£ l√™n! Link ƒë√£ ch√®n v√†o b√†i.";
                } catch(e) { alert("L·ªói up ·∫£nh: " + e); }
            }
        }

        // A2. Auto Format (AI Mini)
        function autoFormat() {
            const ta = document.getElementById('content');
            let txt = ta.value;
            txt = txt.replace(/\r\n/g, "\n").replace(/\n{2,}/g, "\n\n").replace(/(?<!\n)\n(?!\n)/g, "\n\n");
            txt = txt.replace(/^\[(.*?)\]:\s*(.*)$/gm, '**[$1]:** $2'); // B√¥i ƒë·∫≠m tho·∫°i
            txt = txt.replace(/\((.*?)\)/g, '*($1)*'); // In nghi√™ng suy nghƒ©
            txt = txt.replace(/^\s*\*\*\*\s*$/gm, '---'); // K·∫ª ngang
            ta.value = txt;
            alert("‚úÖ ƒê√£ ƒë·ªãnh d·∫°ng xong!");
        }

        // A3. Load Danh S√°ch Ch∆∞∆°ng
        async function loadList() {
            const t = document.getElementById('token').value;
            if(!t) return document.getElementById('list-container').innerHTML = "Ch∆∞a nh·∫≠p Token!";
            
            try {
                const res = await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/data.json?t=${Date.now()}`);
                const data = await res.json();
                window.chapters = JSON.parse(decodeURIComponent(escape(atob(data.content))));
                window.jsonSha = data.sha;

                const c = document.getElementById('list-container');
                c.innerHTML = '';
                if(window.chapters.length === 0) c.innerHTML = "Ch∆∞a c√≥ ch∆∞∆°ng n√†o.";
                
                window.chapters.forEach((h, i) => {
                    c.innerHTML += `
                        <div class="chapter-row">
                            <div><b>#${i+1}:</b> ${h.title}</div>
                            <div class="action-group">
                                <button class="btn-action edit-btn" onclick="editChap(${i})">‚úèÔ∏è S·ª≠a</button>
                                <button class="btn-action del-btn" onclick="delChap(${i})">üóë X√≥a</button>
                            </div>
                        </div>`;
                });
            } catch(e) { document.getElementById('list-container').innerHTML = "L·ªói: " + e; }
        }

        // A4. Chu·∫©n b·ªã S·ª≠a Ch∆∞∆°ng
        async function editChap(i) {
            const c = window.chapters[i];
            switchTab('new');
            document.getElementById('status').innerText = "‚è≥ ƒêang t·∫£i n·ªôi dung ch∆∞∆°ng c≈©...";
            
            try {
                const res = await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/${c.file}?t=${Date.now()}`);
                const d = await res.json();
                
                document.getElementById('chapTitle').value = c.title;
                document.getElementById('content').value = decodeURIComponent(escape(atob(d.content)));
                document.getElementById('edit-index').value = i;
                document.getElementById('edit-file-sha').value = d.sha;
                
                document.getElementById('editor-title').innerText = "‚úèÔ∏è ƒêang S·ª≠a: " + c.title;
                document.getElementById('publishBtn').innerText = "üíæ C·∫¨P NH·∫¨T CH∆Ø∆†NG";
                document.getElementById('publishBtn').style.background = "#f39c12";
                document.getElementById('cancelBtn').style.display = "block";
                document.getElementById('status').innerText = "";
            } catch(e) { alert("L·ªói t·∫£i n·ªôi dung: " + e); }
        }

        // A5. X√≥a Ch∆∞∆°ng
        async function delChap(i) {
            const c = window.chapters[i];
            const t = document.getElementById('token').value;
            if(!confirm(`‚ö†Ô∏è X√ìA Vƒ®NH VI·ªÑN ch∆∞∆°ng:\n"${c.title}"?`)) return;
            
            document.getElementById('list-container').innerHTML = "‚è≥ ƒêang x√≥a file...";
            try {
                // L·∫•y SHA file md ƒë·ªÉ x√≥a
                const fR = await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/${c.file}`);
                const fD = await fR.json();
                // X√≥a file md
                await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/${c.file}`, {
                    method:'DELETE', headers:{Authorization:`token ${t}`}, 
                    body:JSON.stringify({message:`Delete ${c.title}`, sha:fD.sha})
                });
                
                // C·∫≠p nh·∫≠t list
                window.chapters.splice(i, 1);
                const jB = btoa(unescape(encodeURIComponent(JSON.stringify(window.chapters, null, 2))));
                await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/data.json`, {
                    method:'PUT', headers:{Authorization:`token ${t}`}, 
                    body:JSON.stringify({message:"Del item", content:jB, sha:window.jsonSha})
                });
                
                alert("‚úÖ ƒê√£ x√≥a th√†nh c√¥ng!");
                loadList();
            } catch(e) { alert("L·ªói: " + e); loadList(); }
        }

        // A6. ƒêƒÉng / C·∫≠p nh·∫≠t Ch∆∞∆°ng (PUBLISH)
        async function publish() {
            const t = document.getElementById('token').value;
            const ti = document.getElementById('chapTitle').value;
            const c = document.getElementById('content').value;
            const i = document.getElementById('edit-index').value;
            const s = document.getElementById('status');

            if(!t || !ti || !c) return alert("Thi·∫øu th√¥ng tin (Token, Ti√™u ƒë·ªÅ ho·∫∑c N·ªôi dung)!");
            s.innerText = "‚è≥ ƒêang x·ª≠ l√Ω..."; s.style.color = "blue";

            try {
                // L·∫•y list m·ªõi nh·∫•t
                const jR = await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/data.json`, {headers:{Authorization:`token ${t}`}});
                const jD = await jR.json();
                let list = JSON.parse(decodeURIComponent(escape(atob(jD.content))));
                
                let p, h = null;
                if(i !== "") { // Ch·∫ø ƒë·ªô S·ª≠a
                    p = list[i].file;
                    h = document.getElementById('edit-file-sha').value;
                    list[i].title = ti;
                } else { // Ch·∫ø ƒë·ªô M·ªõi
                    const d = `chap_${Date.now()}`;
                    p = `chapters/${d}.md`;
                    list.push({id:d, title:ti, file:p});
                }

                // Upload file MD
                const b64 = btoa(unescape(encodeURIComponent(c)));
                const b = {message: `Update ${ti}`, content: b64};
                if(h) b.sha = h; // N·∫øu s·ª≠a th√¨ g·ª≠i k√®m SHA c≈©
                
                await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/${p}`, {
                    method:'PUT', headers:{Authorization:`token ${t}`}, body:JSON.stringify(b)
                });

                // Update List JSON
                const jB = btoa(unescape(encodeURIComponent(JSON.stringify(list, null, 2))));
                await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/data.json`, {
                    method:'PUT', headers:{Authorization:`token ${t}`}, 
                    body:JSON.stringify({message:"Update list", content:jB, sha:jD.sha})
                });

                s.innerText = "üéâ TH√ÄNH C√îNG!"; s.style.color = "green";
                if(i !== "") { switchTab('list'); resetForm(); }
                else { document.getElementById('content').value=''; document.getElementById('chapTitle').value=''; }

            } catch(e) { s.innerText = "‚ùå L·ªói: " + e; s.style.color = "red"; }
        }

        function resetForm() {
            document.getElementById('chapTitle').value=''; document.getElementById('content').value='';
            document.getElementById('edit-index').value=''; document.getElementById('edit-file-sha').value='';
            document.getElementById('publishBtn').innerText="üöÄ ƒêƒÇNG B√ÄI NGAY";
            document.getElementById('publishBtn').style.background="var(--primary)";
            document.getElementById('cancelBtn').style.display="none";
            document.getElementById('editor-title').innerText="üìù So·∫°n Th·∫£o Ch∆∞∆°ng M·ªõi";
        }

        // ============================================================
        // PH·∫¶N B: QU·∫¢N L√ù NH·∫†C (MUSIC STATION)
        // ============================================================

        // B1. Load Danh S√°ch Nh·∫°c
        async function loadMusicList() {
            const t = document.getElementById('token').value;
            const c = document.getElementById('music-list-container');
            c.innerHTML = "ƒêang t·∫£i...";
            try {
                const res = await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/music.json?t=${Date.now()}`);
                const data = await res.json();
                window.musicData = JSON.parse(decodeURIComponent(escape(atob(data.content))));
                window.musicSha = data.sha;
                
                c.innerHTML = '';
                if(window.musicData.length === 0) c.innerHTML = "Ch∆∞a c√≥ b√†i nh·∫°c n√†o.";

                window.musicData.forEach((song, i) => {
                    c.innerHTML += `
                        <div class="chapter-row">
                            <div>üéµ ${song.title}</div>
                            <button class="btn-action del-btn" onclick="delSong(${i})">üóë X√≥a</button>
                        </div>`;
                });
            } catch(e) { 
                c.innerHTML = "Ch∆∞a t·∫°o file music.json ho·∫∑c l·ªói t·∫£i."; 
                window.musicData = []; window.musicSha = null;
            }
        }

        // B2. Upload Nh·∫°c & C·∫≠p nh·∫≠t Playlist
        async function uploadSong() {
            const t = document.getElementById('token').value;
            const title = document.getElementById('songTitle').value;
            const file = document.getElementById('mp3Input').files[0];
            const status = document.getElementById('musicStatus');

            if(!t || !title || !file) return alert("Thi·∫øu th√¥ng tin (Token, T√™n b√†i, File)!");
            status.innerText = "‚è≥ ƒêang upload MP3 (c√≥ th·ªÉ m·∫•t v√†i ph√∫t)...";

            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async function() {
                try {
                    const b64 = reader.result.split(',')[1];
                    const path = `images/music/${Date.now()}_${file.name}`; // L∆∞u v√†o folder ri√™ng
                    
                    // 1. Upload File MP3
                    await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/${path}`, {
                        method: 'PUT', headers: {Authorization: `token ${t}`}, 
                        body: JSON.stringify({message: `Add song ${title}`, content: b64})
                    });

                    // 2. L·∫•y ho·∫∑c T·∫°o music.json
                    if(!window.musicData || window.musicData.length === 0) {
                        try {
                            const res = await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/music.json`);
                            if(res.ok) {
                                const d = await res.json();
                                window.musicData = JSON.parse(decodeURIComponent(escape(atob(d.content))));
                                window.musicSha = d.sha;
                            } else { window.musicData = []; window.musicSha = null; }
                        } catch { window.musicData = []; }
                    }

                    // 3. Th√™m b√†i m·ªõi v√†o list
                    window.musicData.push({ title: title, url: path });
                    
                    const jsonBody = {
                        message: "Update music list",
                        content: btoa(unescape(encodeURIComponent(JSON.stringify(window.musicData, null, 2))))
                    };
                    if(window.musicSha) jsonBody.sha = window.musicSha;

                    // 4. L∆∞u music.json
                    await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/music.json`, {
                        method: 'PUT', headers: {Authorization: `token ${t}`}, body: JSON.stringify(jsonBody)
                    });

                    status.innerText = "‚úÖ Th√†nh c√¥ng! ƒê·ª£i 1-2 ph√∫t r·ªìi F5 trang ch·ªß.";
                    document.getElementById('songTitle').value = '';
                    loadMusicList(); // Refresh list

                } catch(e) { status.innerText = "‚ùå L·ªói: " + e; }
            };
        }

        // B3. X√≥a Nh·∫°c
        async function delSong(index) {
            if(!confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a b√†i n√†y kh·ªèi Playlist?")) return;
            const t = document.getElementById('token').value;
            
            // X√≥a kh·ªèi m·∫£ng
            window.musicData.splice(index, 1);
            
            const jsonBody = {
                message: "Remove song",
                content: btoa(unescape(encodeURIComponent(JSON.stringify(window.musicData, null, 2)))),
                sha: window.musicSha
            };
            
            // C·∫≠p nh·∫≠t music.json
            await fetch(`https://api.github.com/repos/${CONFIG.adminUser}/${CONFIG.repoName}/contents/music.json`, {
                method: 'PUT', headers: {Authorization: `token ${t}`}, body: JSON.stringify(jsonBody)
            });
            alert("ƒê√£ x√≥a kh·ªèi danh s√°ch!");
            loadMusicList();
        }

    </script>
</body>
</html>
